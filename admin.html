<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Panel - MetaFrog Airdrop</title>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #0d0d0d;
            color: white;
            padding: 20px;
        }
        h1 {
            color: #8a2be2;
            text-align: center;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            border: 1px solid #8a2be2;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #8a2be2;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #1a1a1a;
        }
        .search-box {
            margin: 20px 0;
            padding: 10px;
            width: 100%;
            background: #222;
            border: 1px solid #8a2be2;
            color: white;
        }
    </style>
</head>
<body>
    <h1>Zgłoszenia Airdrop</h1>
    <input type="text" id="searchInput" class="search-box" placeholder="Szukaj po portfelu lub Twitterze...">
    <table id="airdropTable">
        <thead>
            <tr>
                <th>Portfel</th>
                <th>Twitter</th>
                <th>Telegram</th>
                <th>TikTok</th>
                <th>Data</th>
                <th>Akcje</th>
            </tr>
        </thead>
        <tbody id="airdropList"></tbody>
    </table>

    <script>
        // Konfiguracja Firebase (TA SAMA CO W script.js!)
        const firebaseConfig = {
            apiKey: "TWÓJ_API_KEY",
            authDomain: "TWÓJ_PROJEKT.firebaseapp.com",
            databaseURL: "https://TWÓJ_PROJEKT.firebaseio.com",
            projectId: "TWÓJ_PROJEKT",
            storageBucket: "",
            messagingSenderId: "TWÓJ_SENDER_ID",
            appId: "TWÓJ_APP_ID"
        };

        // Inicjalizacja Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Pobieranie i wyświetlanie danych
        function loadAirdrops() {
            database.ref('airdrops/').on('value', (snapshot) => {
                const data = snapshot.val();
                let html = "";

                for (let key in data) {
                    const entry = data[key];
                    html += `
                        <tr>
                            <td>${entry.wallet}</td>
                            <td>${entry.xUsername}</td>
                            <td>${entry.telegram}</td>
                            <td>${entry.tiktok || "-"}</td>
                            <td>${new Date(entry.date).toLocaleString()}</td>
                            <td>
                                <button onclick="verifyEntry('${key}')" style="background: #4CAF50; color: white; border: none; padding: 5px 10px; border-radius: 4px; cursor: pointer;">
                                    ✓ Zweryfikuj
                                </button>
                            </td>
                        </tr>
                    `;
                }

                document.getElementById("airdropList").innerHTML = html;
            });
        }

        // Funkcja weryfikująca zgłoszenie
        function verifyEntry(key) {
            if (confirm("Czy na pewno chcesz zweryfikować to zgłoszenie?")) {
                database.ref('airdrops/' + key).update({ verified: true })
                    .then(() => alert("Zgłoszenie zweryfikowane!"))
                    .catch(error => alert("Błąd: " + error));
            }
        }

        // Wyszukiwarka
        document.getElementById("searchInput").addEventListener("input", (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const rows = document.querySelectorAll("#airdropTable tbody tr");

            rows.forEach(row => {
                const wallet = row.cells[0].textContent.toLowerCase();
                const twitter = row.cells[1].textContent.toLowerCase();
                if (wallet.includes(searchTerm) || twitter.includes(searchTerm)) {
                    row.style.display = "";
                } else {
                    row.style.display = "none";
                }
            });
        });

        // Ładowanie danych przy starcie
        window.onload = loadAirdrops;
    </script>
</body>
</html>
